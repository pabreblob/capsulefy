{% extends 'base.html' %}
{% load static %}
{% block styles %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/modular-capsule.css' %}"/>
{% endblock %}
{% block contenido %}
    {% load static %}
    <div class="container-fluid">
        {% for error in errors %}
            <p>{{ error }}</p>
        {% endfor %}
        <form id="form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p><label for="id_description">Description:</label> <input type="text" name="description" maxlength="250" required="" id="id_description" value="{{ oldmodule.description }}"></p>
            <p><label for="id_release_date">Release date:</label> <input type="text" name="release_date" required="" id="id_release_date" value="{{ oldmodule.release_date|date:"Y-m-d H:i"}}"></p>
            <p><label for="id_file">Files:</label> <input type="file" name="file" id="id_file" multiple></p>
            <p><input type="submit" value="Save"></p>
        </form>

        {% if oldmodule.files%}
            {% for file in oldmodule.files.all %}
                 {% if file.type == "I" %}
                           <img class="module-img" src="{{ file.url }}"/>
                        {% endif %}
                        {% if file.type == "F" %}
                            <a href="{{ file.url }}">File</a>
                        {% endif %}
                        {% if file.type == "V" %}
                            <video width="320" height="240" controls>
                                <source src="{{ file.url }}"/>
                            </video>
                        {% endif %}
                        <a href="/deletefile/{{ file.id }}">Delete</a>
            {% endfor %}
        {% endif %}

    </div>
{% endblock %}
